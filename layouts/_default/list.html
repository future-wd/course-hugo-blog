{{ define "main" }}
<section class="main">
  <div class="container">
    <div class="row">
      <div class="col">
        {{- $paginator := "" -}}
        {{- if .IsHome -}}
          {{- $paginator = .Paginate (where .Site.RegularPages "Type" "posts" )}}
        {{- else -}}
          {{- $paginator = .Paginator -}}
          {{ partial "title" . }}
        {{ end }}
        {{ .Content | markdownify }}
        {{ range $paginator.Pages }}
        <article class="post-summary mb-3">
          <div class="row">
            {{- $post := . -}}
            {{- with .Params.images -}}
              {{- if reflect.IsSlice . -}}
                {{- with index . 0 -}}
                  {{- with $image := $post.Resources.GetMatch . }}
                    <div class="col-md-5 d-flex justify-content-center">
                      <img src="{{ $image.RelPermalink }}" class="img-fluid post-summary__image" 
                      width="{{ .Width }}" height="{{ .Height }}" alt="{{ $post.Title }}">
                    </div>
                    <div class="col-md-7">
                  {{ else }}
                    <div class="col">
                  {{- end -}}
                {{- end -}}
              {{- end -}}
            {{- end -}}
              <header>
                <h2><a href="{{ .Permalink }}">{{ .Title }}</a></h2>
              </header>
              <div class="pb-3">
                {{ .Summary }}
              </div>
            </div>
          </div>
        </article>
        {{ end }}
        {{ if $paginator.Pages }}
        <div class="mt-3 mx-3 d-flex justify-content-center">
          {{ template "_internal/pagination.html" . }}
        </div>
        {{ end }}
      </div>
    </div>
  </div>
</section>
{{ end }}